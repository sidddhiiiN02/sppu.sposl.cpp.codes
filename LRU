//Write a program to simulate Page replacement algorithm. LRU
Sample Input:
2, 3, 2, 1, 5, 2, 4, 5, 3, 2, 5, 2 and no. of frames is 3

#include <iostream>
#include <vector>
#include <unordered_map>
#include <climits>

using namespace std;

int main() {
    vector<int> page_string = {2, 3, 2, 1, 5, 2, 4, 5, 3, 2, 5, 2};
    int num_frames = 3;

    unordered_map<int, int> frames;
    int page_faults = 0;

    cout << "--- LRU Page Replacement ---" << endl;
    cout << "Frames: " << num_frames << endl << endl;

    for (int i = 0; i < page_string.size(); i++) {
        int page = page_string[i];
        int current_time = i;
        cout << "Page " << page << ": ";

        if (frames.find(page) != frames.end()) {
            cout << "HIT. ";
            frames[page] = current_time;
        } else {
            page_faults++;
            cout << "FAULT. ";

            if (frames.size() < num_frames) {
                frames[page] = current_time;
                cout << "Loaded " << page << ".";
            } else {
                int lru_page = -1;
                int oldest_time = INT_MAX;

                for (auto const& [frame_page, last_used] : frames) {
                    if (last_used < oldest_time) {
                        oldest_time = last_used;
                        lru_page = frame_page;
                    }
                }

                frames.erase(lru_page);
                frames[page] = current_time;
                cout << "Evicted " << lru_page << ". Loaded " << page << ".";
            }
        }
        cout << endl;
    }

    cout << "\nTotal Page Faults: " << page_faults << endl;

    return 0;
}  
